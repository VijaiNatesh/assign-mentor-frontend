{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\React\\\\MentorStudent\\\\frontend\\\\assign-mentor-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"D:\\\\React\\\\MentorStudent\\\\frontend\\\\assign-mentor-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React\\\\MentorStudent\\\\frontend\\\\assign-mentor-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{fetchStudents}from\"../../redux/action/student/studentAction.js\";import{fetchMentors}from'../../redux/action/mentor/mentorAction.js';import styles from'../../myStyles.module.css';import{changeMentorforstudent}from'../../redux/action/changementorforstudent/changementorforstudentAction.js';import{createStudentstomentor}from'../../redux/action/studentstomentor/studentstomentorAction.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Changementorforstudent(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),studentSelected=_useState2[0],setStudentSelected=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),mentorSelected=_useState4[0],setMentorSelected=_useState4[1];var dispatch=useDispatch();useEffect(function(){dispatch(fetchStudents());},[dispatch]);useEffect(function(){dispatch(fetchMentors());},[dispatch]);var studentsList=useSelector(function(state){return state.student;});var students=studentsList.students;console.log(students);var mentorsList=useSelector(function(state){return state.mentor;});var mentors=mentorsList.mentors;console.log(mentors);var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var studData,isAssigned,changeData,assignData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(studentSelected,mentorSelected);studData=students.filter(function(s){return s._id===studentSelected;});isAssigned=studData[0].mentor;console.log(studData,\"studData\");console.log(isAssigned,\"isAssigned\");if(!isAssigned){_context.next=12;break;}changeData={studentId:studentSelected,newMentorId:mentorSelected};_context.next=10;return dispatch(changeMentorforstudent(changeData));case 10:_context.next=15;break;case 12:assignData={mentorId:mentorSelected,students:new Array(studentSelected)};_context.next=15;return dispatch(createStudentstomentor(assignData));case 15:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.stumen,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Mentor\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setMentorSelected(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select Mentor \"}),mentors&&mentors.map(function(mentor){return/*#__PURE__*/_jsx(\"option\",{value:mentor&&mentor._id,children:mentor.name},mentor._id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.stumen,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Students\"}),students&&students.map(function(stu){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:stu&&stu._id,onChange:function onChange(e){return setStudentSelected(e.target.value);}}),stu.name]},stu._id);})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.stumen,children:/*#__PURE__*/_jsx(\"button\",{onClick:submitHandler,children:\"Submit\"})})]});}export default Changementorforstudent;","map":{"version":3,"sources":["D:/React/MentorStudent/frontend/assign-mentor-frontend/src/component/changementorforstudent/Changementorforstudent.js"],"names":["React","useState","useEffect","useDispatch","useSelector","fetchStudents","fetchMentors","styles","changeMentorforstudent","createStudentstomentor","Changementorforstudent","studentSelected","setStudentSelected","mentorSelected","setMentorSelected","dispatch","studentsList","state","student","students","console","log","mentorsList","mentor","mentors","submitHandler","e","preventDefault","studData","filter","s","_id","isAssigned","changeData","studentId","newMentorId","assignData","mentorId","Array","stumen","target","value","map","name","stu"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { fetchStudents } from \"../../redux/action/student/studentAction.js\"\r\nimport { fetchMentors } from '../../redux/action/mentor/mentorAction.js';\r\nimport styles from '../../myStyles.module.css'\r\nimport { changeMentorforstudent } from '../../redux/action/changementorforstudent/changementorforstudentAction.js';\r\nimport { createStudentstomentor } from '../../redux/action/studentstomentor/studentstomentorAction.js';\r\n\r\n\r\nfunction Changementorforstudent() {\r\n\r\n    const [studentSelected, setStudentSelected] = useState([])\r\n    const [mentorSelected, setMentorSelected] = useState()\r\n\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        dispatch(fetchStudents())\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        dispatch(fetchMentors())\r\n    }, [dispatch])\r\n\r\n    const studentsList = useSelector(state => state.student)\r\n    const { students } = studentsList\r\n    console.log(students)\r\n\r\n\r\n    const mentorsList = useSelector(state => state.mentor)\r\n    const { mentors } = mentorsList\r\n    console.log(mentors)\r\n    \r\n\r\n    const submitHandler = async(e) => {\r\n        e.preventDefault();\r\n        console.log(studentSelected, mentorSelected)\r\n        const studData = students.filter((s) => {\r\n            return s._id === studentSelected;\r\n          });\r\n          const isAssigned = studData[0].mentor;\r\n          console.log(studData, \"studData\");\r\n          console.log(isAssigned, \"isAssigned\");\r\n        if(isAssigned){\r\n            const changeData = {\r\n                studentId: studentSelected,\r\n                newMentorId: mentorSelected\r\n            }\r\n           await dispatch(changeMentorforstudent(changeData))\r\n        }\r\n        else{\r\n            const assignData = {\r\n                mentorId: mentorSelected,\r\n                students: new Array (studentSelected)\r\n            }\r\n            await dispatch(createStudentstomentor(assignData))\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.stumen}>\r\n                <label>Select Mentor</label>\r\n                <select onChange={(e) => setMentorSelected(e.target.value)}>\r\n                    <option>Select Mentor </option>\r\n                    {mentors && mentors.map(mentor => {\r\n                        return (\r\n                            <option value={mentor && mentor._id} key={mentor._id}>\r\n                                {mentor.name}\r\n                            </option>\r\n                        )\r\n                    })}\r\n                </select>\r\n            </div>\r\n\r\n            <div className={styles.stumen}>\r\n                <label>Select Students</label>\r\n                {students && students.map(stu => {\r\n                    return (\r\n                        <li key={stu._id}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                value={stu && stu._id}\r\n                                onChange={(e) => setStudentSelected(e.target.value)}\r\n                            />\r\n                            {stu.name}\r\n                        </li>\r\n                    )\r\n                })}\r\n            </div>\r\n            <div className={styles.stumen}>\r\n                <button onClick={submitHandler}>Submit</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Changementorforstudent\r\n"]},"metadata":{},"sourceType":"module"}